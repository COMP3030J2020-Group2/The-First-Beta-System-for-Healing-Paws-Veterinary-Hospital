{% extends"customer_console_base.html" %}
{% block content %}
    <div class="content=inner">
        <header class="page-header">
            <div class="container-fluid">
                <div class="row">
                    <div class="col">
                        <h2 class="no-margin-bottom" data-locale="My Pets">My Pets</h2>
                    </div>
                    <div class="col">
                        <a class="btn btn-primary" href="{{ url_for('pet_signup') }}" data-locale="Add Pet">Add Pet</a>
                    </div>
                </div>
            </div>
           
          
        </header>
        <div class="container-fluid">
            <div class="table-responsive">
                <div style="width: 50%;">
                    <table class="table">
                        <tr>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Has Ongoing Appointment?</th>
                            <th>Current Status</th>
                        </tr>
                    
                        {% for pet in pets %}
                            <tr>
                                <td><a id="{{ pet.id }}">{{ pet.name }}</a></td>
                                {% if pet.type == 1 %}
                                <td data-locale="Cat">Cat</td>
                                {% elif pet.type == 2 %}
                                <td data-locale="Dog">Dog</td>
                                {% endif %}

                                
                                {% for appoint in pet.appointments %}
                                    {% if appoint.status == 0  %}
                                    <td>Yes</td>
                                        {% if appoint.pet_status == 'none' %}
                                        <td>Checked</td>
                                        {% else %}
                                        <td>{{ appoint.pet_status }}</td>
                                        {% endif %}
                                    {% elif appoint.status == 1  %}
                                    <td>Yes</td>
                                    <td>Applied but not checked yet</td>
                                    {% else %}
                                    <td>No</td>
                                    <td>None</td>
                                    {% endif %}
                                    
                                {% endfor %}                         
                                <td><a class="btn btn-primary btn-sm" href="/update_pet/{{pet.id}}" role="button">Edit</a>
                                <a class="btn btn-primary btn-sm" href="/delete_pet/{{pet.id}}" role="button">Delete</a></td>
                            </tr>
                        {% endfor%}


                        
                    </table>
                </div>
            </div>
        </div>      
    </div>
    <!-- <script>
        var a_list = document.querySelectorAll('a');
        for(var i = 0;i<a_list.length;i++){
            a_list[i].addEventListener('click', informationPage);
        }

        function informationPage(e){
            
            var x = e.target;
            var id = x.id;
            var form = document.createElement('form');
            form.method = "post";
            form.action = "/pets";
            var idArea = document.createElement('input');
            idArea.name = 'id';
            idArea.value = id;
            form.appendChild(idArea);
            document.body.appendChild(form);
            form.submit();
        }
    </script> -->
{% endblock %}